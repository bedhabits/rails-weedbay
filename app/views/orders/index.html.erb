<div class="container mt-4">
  <div class="row d-flex justify-content-center">
    <div class="col-sm-6">
      <h1>Your Orders</h1>

      <% @orders.each do |order| %>
        <% if order.user == current_user || current_user.admin %>
      <div class="card mb-5">
        <div class="card-body">
          <h5 class="card-title">Name: <%= order.name %></h5>
          <p class="card-text">Email: <%= order.email %></p>
          <p class="card-text">Address: <%= order.address %> </p>
          <h6><strong>Products</strong></h6>
          <% products = order.products.map { |product| product } %>
          <% products.each do |product| %>
          <p class="card-text"><%= link_to product.name , product_path(product) %>
          $<%= product.price %></p>
          <% end %>
          <hr>
          <p class="card-text"><strong>SubTotal:
            <% total = 0 %>
            <% products.each {|product| total+=product.price} %>
            <%= total %>
          </strong></p>
          <%= link_to 'Edit', edit_order_path(order) %>
          <%= link_to 'Delete', order_path(order), method: :delete %>
        <% end %>
        </div>
      </div>
      <% end %>
    </div>
  </div>
</div>



